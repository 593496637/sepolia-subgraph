# The Graph Subgraph é…ç½®æ–‡ä»¶
# ğŸ“‹ é¡¹ç›®è¯´æ˜ï¼šSepolia æµ‹è¯•ç½‘è½¬è´¦è®°å½•ç´¢å¼•å™¨
# ğŸ¯ åŠŸèƒ½ç›®æ ‡ï¼šå°†æ™ºèƒ½åˆçº¦äº‹ä»¶è½¬æ¢ä¸ºå¯æŸ¥è¯¢çš„å›¾æ•°æ®ç»“æ„
# ğŸŒ ç½‘ç»œç¯å¢ƒï¼šEthereum Sepolia Testnet
# ğŸ“Š æ•°æ®æºï¼šSimpleTransferContract æ™ºèƒ½åˆçº¦äº‹ä»¶

# Subgraph è§„èŒƒç‰ˆæœ¬ï¼Œå†³å®šæ”¯æŒçš„åŠŸèƒ½å’Œè¯­æ³•
specVersion: 0.0.5

# GraphQL Schema æ–‡ä»¶ä½ç½®ï¼Œå®šä¹‰æ•°æ®ç»“æ„å’ŒæŸ¥è¯¢æ¥å£
schema:
  file: ./schema.graphql

# æ•°æ®æºé…ç½® - å®šä¹‰è¦ç›‘å¬çš„åŒºå—é“¾æ•°æ®
dataSources:
  # ä»¥å¤ªåŠæ•°æ®æºç±»å‹
  - kind: ethereum
    # æ•°æ®æºåç§°ï¼Œç”¨äºæ ‡è¯†å’Œå¼•ç”¨
    name: SimpleTransferContract
    # ç›®æ ‡ç½‘ç»œï¼šSepolia æµ‹è¯•ç½‘
    network: sepolia
    
    # æ•°æ®æºè¯¦ç»†ä¿¡æ¯
    source:
      # æ™ºèƒ½åˆçº¦åœ°å€ - Sepolia æµ‹è¯•ç½‘ä¸Šçš„åˆçº¦å®ä¾‹
      address: "0x830B796F55E6A3f86E924297e510B24192A0Ba1c"
      # åˆçº¦ ABI å¼•ç”¨åç§°
      abi: SimpleTransferContract
      # å¼€å§‹ç›‘å¬çš„åŒºå—å· - åˆçº¦éƒ¨ç½²åŒºå—ï¼Œé¿å…æ‰«ææ— æ•ˆåŒºå—
      startBlock: 9053891
    
    # äº‹ä»¶æ˜ å°„é…ç½® - å®šä¹‰å¦‚ä½•å¤„ç†åŒºå—é“¾äº‹ä»¶
    mapping:
      # æ˜ å°„ç±»å‹ï¼šä»¥å¤ªåŠäº‹ä»¶å¤„ç†
      kind: ethereum/events
      # Graph Protocol API ç‰ˆæœ¬
      apiVersion: 0.0.7
      # ç¼–è¯‘ç›®æ ‡è¯­è¨€ï¼šAssemblyScriptï¼ˆç¼–è¯‘ä¸º WebAssemblyï¼‰
      language: wasm/assemblyscript
      
      # å®ä½“ç±»å‹åˆ—è¡¨ - å®šä¹‰æ•°æ®æ¨¡å‹ä¸­çš„å®ä½“
      entities:
        - TransferRecord  # è½¬è´¦è®°å½•å®ä½“
        - Account        # è´¦æˆ·å®ä½“
      
      # ABI æ–‡ä»¶é…ç½® - åˆçº¦æ¥å£å®šä¹‰
      abis:
        - name: SimpleTransferContract
          file: ./abis/SimpleTransferContract.json
      
      # äº‹ä»¶å¤„ç†å™¨é…ç½® - å®šä¹‰äº‹ä»¶åˆ°å¤„ç†å‡½æ•°çš„æ˜ å°„
      eventHandlers:
        # TransferRecord äº‹ä»¶å¤„ç†é…ç½®
        - event: TransferRecord(indexed address,indexed address,uint256,uint256,string,bytes32)
          # å¯¹åº”çš„å¤„ç†å‡½æ•°åç§°
          handler: handleTransferRecord
      
      # æ˜ å°„é€»è¾‘æ–‡ä»¶ä½ç½® - åŒ…å«äº‹ä»¶å¤„ç†å‡½æ•°çš„ TypeScript ä»£ç 
      file: ./src/mapping.ts